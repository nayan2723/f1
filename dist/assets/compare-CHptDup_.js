import"./f1data-Bkmt7dHv.js";import"./mountReact-Bcx_AE3E.js";import{a as H}from"./vendor-motion-IIwaLPYS.js";import"./vendor-react-C2FUrQ2K.js";import"./vendor-DXLWAiYI.js";import"./vendor-radix-206XVAFP.js";function c(o){return o==null?"":String(o).replace(/[&<>'"`=/]/g,function(i){return{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;","`":"&#x60;","=":"&#x3D;","/":"&#x2F;"}[i]})}document.addEventListener("DOMContentLoaded",()=>{const o=document.getElementById("driver-a-select"),i=document.getElementById("driver-b-select"),M=document.getElementById("compare-bars-container"),g=document.getElementById("compareRadarChart");if(!window.F1Data||!o||!g)return;const h=window.F1Data.drivers;let u=null;const k=document.querySelector("#driver-a-headshot img"),$=document.querySelector("#driver-b-headshot img"),b=document.getElementById("driver-a-headshot"),x=document.getElementById("driver-b-headshot"),m=document.getElementById("swap-drivers-btn"),e=document.getElementById("save-compare-btn"),_=document.getElementById("save-compare-tooltip"),C=h.map(t=>`<option value="${c(t.code.toLowerCase())}">${c(t.name)} (${c(t.team)})</option>`).join("");o.innerHTML=C,i.innerHTML=C,o.value="ver",i.value="nor";let w="",L="";const v=()=>{const t=o.value,n=i.value;if(t===n||t===w&&n===L)return;w=t,L=n;const s=h.find(a=>a.id===t||a.code.toLowerCase()===t.toLowerCase()),r=h.find(a=>a.id===n||a.code.toLowerCase()===n.toLowerCase());if(!s||!r)return;const d=window.F1Data.getTeamColor(s.team),l=window.F1Data.getTeamColor(r.team),p=s.name.split(" ").pop().toLowerCase(),I=r.name.split(" ").pop().toLowerCase();k.src=`/assets/legacy/drivers/portrait_${p}.png`,$.src=`/assets/legacy/drivers/portrait_${I}.png`,b.style.borderBottom=`4px solid ${d}`,x.style.borderBottom=`4px solid ${l}`,b.style.boxShadow=`0 10px 20px ${d}33`,x.style.boxShadow=`0 10px 20px ${l}33`;const E=[{label:"Wins",key:"wins",max:60},{label:"Podiums",key:"podiums",max:120},{label:"Poles",key:"poles",max:50},{label:"Points (2026)",key:"pts",max:400},{label:"Consistency %",key:"consistency",max:100}];M.innerHTML=E.map(a=>{const f=s[a.key]!==void 0?s[a.key]:Math.floor(Math.random()*40+60),y=r[a.key]!==void 0?r[a.key]:Math.floor(Math.random()*40+60),T=Math.min(f/a.max*100,100),A=Math.min(y/a.max*100,100),D=f>y,F=y>f;return`
        <div class="compare-metric">
          <div style="display:flex; justify-content: space-between; font-size: 11px; color: var(--text-secondary); margin-bottom: 6px; text-transform: uppercase;">
             <span style="color: ${D?"#fff":""}">${c(s.code)} • ${c(f)}</span>
             <span>${c(a.label)}</span>
             <span style="color: ${F?"#fff":""}">${c(y)} • ${c(r.code)}</span>
          </div>
          <div style="display: flex; height: 8px; background: rgba(255,255,255,0.05); border-radius: 4px; overflow: hidden;">
             <div style="width: 50%; display: flex; justify-content: flex-end; padding-right: 2px;">
                <div class="compare-bar-fill" data-width="${T}%" style="width: 0%; background: ${d}; border-radius: 4px 0 0 4px;"></div>
             </div>
             <div style="width: 50%; display: flex; justify-content: flex-start; padding-left: 2px;">
                <div class="compare-bar-fill" data-width="${A}%" style="width: 0%; background: ${l}; border-radius: 0 4px 4px 0;"></div>
             </div>
          </div>
        </div>
      `}).join(""),setTimeout(()=>{document.querySelectorAll(".compare-bar-fill").forEach(a=>{H(a,{width:a.dataset.width},{type:"spring",stiffness:80,damping:15,mass:1.2})})},50);const S={labels:["Pace","Racecraft","Consistency","Experience","Qualifying","Rain"],datasets:[{label:s.name,data:B(s),backgroundColor:`${d}40`,borderColor:d,borderWidth:2,pointBackgroundColor:d},{label:r.name,data:B(r),backgroundColor:`${l}40`,borderColor:l,borderWidth:2,pointBackgroundColor:l}]};u?(u.data=S,u.update()):u=new Chart(g,{type:"radar",data:S,options:{responsive:!0,maintainAspectRatio:!1,scales:{r:{angleLines:{color:"rgba(255, 255, 255, 0.1)"},grid:{color:"rgba(255, 255, 255, 0.05)"},pointLabels:{color:"var(--text-secondary)",font:{family:"Inter",size:11}},ticks:{display:!1,min:60,max:100}}},plugins:{legend:{position:"bottom",labels:{color:"#fff",font:{family:"Inter"}}}}}}),e&&(e.textContent="⭐ Save Comparison",e.classList.remove("btn-success"))};e&&(e.disabled=!1,e.style.opacity="1",_&&(_.style.display="none")),m&&m.addEventListener("click",t=>{t.preventDefault(),m.classList.remove("animate__animated","animate__pulse"),m.offsetWidth,m.classList.add("animate__animated","animate__pulse");const n=o.value;o.value=i.value,i.value=n,v()}),e&&e.addEventListener("click",async t=>{t.preventDefault();const n=Date.now(),s=sessionStorage.getItem("f1_last_save_time");if(s&&n-parseInt(s,10)<5e3){e.textContent="Too Fast",e.classList.add("animate__animated","animate__headShake"),setTimeout(()=>{e.textContent="⭐ Save Comparison",e.classList.remove("animate__animated","animate__headShake")},2e3);return}sessionStorage.setItem("f1_last_save_time",n.toString());const r=o.value,d=i.value,l=`${r}_vs_${d}_${Date.now()}`;e.textContent="Saving...",e.disabled=!0,e.classList.remove("animate__animated","animate__rubberBand","animate__headShake");try{const p=JSON.parse(localStorage.getItem("f1_comparisons")||"[]");p.push({id:l,driver1:r,driver2:d,timestamp:new Date().toISOString()}),localStorage.setItem("f1_comparisons",JSON.stringify(p)),e.textContent="✅ Saved",e.classList.add("btn-success","animate__animated","animate__rubberBand")}catch{e.textContent="❌ Error",e.classList.add("animate__animated","animate__headShake")}finally{setTimeout(()=>{(e.textContent==="✅ Saved"||e.textContent==="❌ Error")&&(e.disabled=!1,e.textContent="⭐ Save Comparison",e.classList.remove("btn-success","animate__animated","animate__rubberBand","animate__headShake"))},2e3)}});function B(t){const n=Math.min(t.pts/2,99);return[Math.max(60,Math.min(99,n+t.wins*2)),Math.max(60,Math.min(99,n+t.podiums*1.5)),Math.max(60,Math.min(99,90-t.dnfs*5)),Math.max(60,Math.min(99,70+t.wins)),Math.max(60,Math.min(99,n+t.poles*2)),Math.floor(Math.random()*20+75)]}o.addEventListener("change",v),i.addEventListener("change",v),v()});document.getElementById("navbar-root").innerHTML=renderNavbar("compare.html");document.getElementById("footer-root").innerHTML=renderFooter();animateOnScroll();
