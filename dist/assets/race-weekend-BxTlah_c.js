import"./mountReact-Do6zrrNa.js";/* empty css               */import"./vendor-react-Cke1li9a.js";import"./vendor-B_9GMGaQ.js";import"./vendor-radix-YAVAkKLi.js";import"https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";import"https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";import"./vendor-motion-CsAKAQ8w.js";document.addEventListener("DOMContentLoaded",()=>{const l=document.getElementById("live-timing-body"),n=document.getElementById("btn-toggle-live"),f=document.getElementById("live-session-status");if(!l||!window.F1Data)return;const v=["S","M","H","I","W"];let d=!0,y=null,p=12;const c=58;let s=window.F1Data.getSortedDrivers().map((o,e)=>({id:o.id,name:o.name,code:o.code,team:o.team,color:window.F1Data.getTeamColor(o.team),pos:e+1,startPos:e+1,tyre:v[Math.floor(Math.random()*3)],fastestLap:!1,interval:0,gap:0,history:[]})),h=0;s.forEach((o,e)=>{if(e>0){const r=Math.random()*2+.5;o.interval=parseFloat(r.toFixed(3)),h+=r,o.gap=parseFloat(h.toFixed(3))}}),s[Math.floor(Math.random()*5)].fastestLap=!0;const g=(o=!1)=>{o&&(l.innerHTML="");const e=window.matchMedia("(prefers-reduced-motion: reduce)").matches;s.forEach(t=>{let a=document.getElementById(`drv-row-${t.id}`);const i=t.startPos-t.pos,b=i>0?`<span style="color:var(--f1-teal); font-weight:bold;">▲ ${i}</span>`:i<0?`<span style="color:var(--f1-red); font-weight:bold;">▼ ${Math.abs(i)}</span>`:'<span style="color:var(--text-tertiary);">-</span>',w=t.fastestLap?'<span style="color:#B822AD; font-size:10px; margin-left: 6px;">(FL)</span>':"",L=t.tyre==="S"?"#e21021":t.tyre==="M"?"#fdcd15":t.tyre==="H"?"#ffffff":"#45b84d";a||(a=document.createElement("tr"),a.id=`drv-row-${t.id}`,e||(a.style.transition="transform 0.4s ease, background 0.3s ease"),l.appendChild(a)),!o&&a.dataset.pos&&parseInt(a.dataset.pos)!==t.pos&&!e&&(a.style.background="rgba(255, 255, 255, 0.1)",setTimeout(()=>a.style.background="transparent",400)),a.dataset.pos=t.pos,a.innerHTML=`
        <td class="pos-cell" style="font-weight:700;">${t.pos}</td>
        <td style="font-size:12px;">${b}</td>
        <td>
          <div class="driver-cell" style="display:flex; align-items:center;">
             <span class="team-color-bar" style="background:${t.color}; display:inline-block; width:3px; height:16px; margin-right:8px;"></span>
             <span class="driver-name" style="font-family:'Inter'; font-weight:600;">${t.name} ${w}</span>
          </div>
        </td>
        <td style="text-align:center;">
          <div style="width:20px; height:20px; border-radius:50%; border:2px solid ${L}; color:#fff; font-size:10px; display:inline-flex; align-items:center; justify-content:center; font-weight:bold;">${t.tyre}</div>
        </td>
        <td style="text-align:right; font-family:'Orbitron'; font-size:13px; color:var(--text-secondary);">${t.pos===1?"Leader":"+"+t.interval.toFixed(3)}</td>
        <td style="text-align:right; font-family:'Orbitron'; font-size:13px;">${t.pos===1?"":"+"+t.gap.toFixed(3)}</td>
      `});const r=Array.from(l.children);r.sort((t,a)=>parseInt(t.dataset.pos)-parseInt(a.dataset.pos)),r.forEach(t=>l.appendChild(t))},x=()=>{if(!d)return;if(p=Math.min(p+1,c),f.innerHTML=`Session: RACE | Laps: ${p}/${c} | Track: DRY`,Math.random()<.25){const e=Math.floor(Math.random()*(s.length-1))+1,r=s[e],t=s[e-1];r.pos-=1,t.pos+=1,s.sort((a,i)=>a.pos-i.pos)}let o=0;s.forEach((e,r)=>{if(e.fastestLap=!1,r>0){let t=Math.random()*.4-.2;e.interval=Math.max(.1,parseFloat((e.interval+t).toFixed(3))),o+=e.interval,e.gap=parseFloat(o.toFixed(3))}else e.interval=0,e.gap=0}),s[Math.floor(Math.random()*8)].fastestLap=!0,window.requestAnimationFrame(()=>g(!1)),p>=c&&(m(),f.innerHTML="Session: FINISHED | Laps: 58/58 | Track: DRY")},u=()=>{d=!0,n.querySelector(".btn-text").textContent="Pause Feed",n.classList.remove("btn-secondary"),n.classList.add("btn-primary"),y=setInterval(x,3e3)},m=()=>{d=!1,clearInterval(y),n.querySelector(".btn-text").textContent="Resume Feed",n.classList.remove("btn-primary"),n.classList.add("btn-secondary")};n.addEventListener("click",()=>{d?m():u()}),window.addEventListener("beforeunload",m),g(!0),u()});
