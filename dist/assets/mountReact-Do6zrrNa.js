const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/DriverStandingsTable-BIDBRA_M.js","assets/vendor-react-Cke1li9a.js","assets/vendor-B_9GMGaQ.js","assets/vendor-BU6TPP52.css","assets/vendor-primereact-B0Jta9GP.js","assets/vendor-primereact-Dq93yEye.css"])))=>i.map(i=>d[i]);
import{r as h,R as n,i as O,k as ne,X as re,m as A}from"./vendor-react-Cke1li9a.js";import{R as oe,T as ie,V as se,I as le,P as ce,C as de,S as ue,a as me,b as fe,c as pe,d as ge,e as he,f as ve,g as be,O as we,h as ye,i as Ee,j as xe}from"./vendor-radix-YAVAkKLi.js";import{getApps as Se,initializeApp as Ne,getApp as Ie}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";import{getAuth as Ae,GoogleAuthProvider as _e,signOut as ke,signInWithPopup as Ce,signInWithRedirect as Fe,createUserWithEmailAndPassword as Pe,signInWithEmailAndPassword as Le,onAuthStateChanged as De}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";import{getFirestore as Te,doc as K,getDoc as X,setDoc as Y}from"https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";import{A as Oe,m as W}from"./vendor-motion-CsAKAQ8w.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}})();let _,G,P,S=!1,Me=JSON.parse(localStorage.getItem("f1_auth_user"))||null;try{const e={apiKey:"AIzaSyCCOLY1CK0BacrnXDELpzM6800hOy_0IRk",authDomain:"f1-insights-37bcf.firebaseapp.com",projectId:"f1-insights-37bcf",storageBucket:"f1-insights-37bcf.firebasestorage.app",messagingSenderId:"455396545391",appId:"1:455396545391:web:9146459aa127f429300e9a"};Se().length?_=Ie():_=Ne(e),G=Ae(_),P=Te(_),console.log("[Firebase] Web SDK initialized correctly.")}catch(e){console.error("[Firebase] Critical Initialization Error:",e.message),S=!0}S&&(console.warn("Vercel Config missing or offline. Falling back to Local Auth Mock."),G={currentUser:Me},P={});const p=G,C=P,Be=!S,R=async(e,t,a)=>{if(S){let r=JSON.parse(localStorage.getItem("f1_db")||"{}");return r[e.collection]||(r[e.collection]={}),a?.merge?r[e.collection][e.id]={...r[e.collection][e.id],...t}:r[e.collection][e.id]=t,localStorage.setItem("f1_db",JSON.stringify(r)),Promise.resolve()}return Y(e,t,a)},Q=async e=>{if(S){const a=JSON.parse(localStorage.getItem("f1_db")||"{}")[e.collection]?.[e.id];return Promise.resolve({exists:()=>!!a,data:()=>a})}return X(e)},I=(...e)=>{let t,a;return e.length===3?(t=e[1],a=e[2]):(t=e[0],a=e[1]),S?{collection:t,id:a}:K(P,t,a)},$=new _e;$.setCustomParameters({prompt:"select_account"});let E=!Be,u=JSON.parse(localStorage.getItem("f1_auth_user"))||null;const N=[],k=()=>N.forEach(e=>{try{e(u)}catch(t){console.error("[AuthService] Error in mock auth listener:",t)}});let J=null;const w={initAuthListener(e){return N.push(e),E?(e(u),()=>{}):(J?e(p.currentUser):J=De(p,async t=>{try{N.forEach(a=>a(t))}catch(a){console.error("[AuthService] Error in auth listener callback",a)}}),()=>{const t=N.indexOf(e);t>-1&&N.splice(t,1)})},async login(e,t){if(!e||!t)throw new Error("Email and password are required.");return E?new Promise(a=>setTimeout(()=>{u={uid:"u1",email:e,displayName:e.split("@")[0]},localStorage.setItem("f1_auth_user",JSON.stringify(u)),k(),a({user:u})},500)):Le(p,e,t)},async signup(e,t){if(!e||!t)throw new Error("Email and password are required.");if(t.length<6)throw new Error("Password must be at least 6 characters.");return E?new Promise(a=>setTimeout(()=>{u={uid:"u1",email:e,displayName:e.split("@")[0]},localStorage.setItem("f1_auth_user",JSON.stringify(u)),k(),a({user:u})},500)):Pe(p,e,t)},async loginWithGoogle(){if(E)return new Promise(e=>setTimeout(()=>{u={uid:"u1",email:"google@f1.com",displayName:"Google Fan"},localStorage.setItem("f1_auth_user",JSON.stringify(u)),k(),e({user:u})},500));try{return await Ce(p,$)}catch(e){if(console.error("[AuthService] Google Popup Error Code:",e.code,"Message:",e.message),e.code==="auth/popup-blocked"||e.code==="auth/unauthorized-domain"||e.code==="auth/cancelled-popup-request")return console.warn("[AuthService] Popup blocked/unauthorized. Falling back to signInWithRedirect..."),Fe(p,$);throw e}},async logout(){return E?new Promise(e=>setTimeout(()=>{u=null,localStorage.removeItem("f1_auth_user"),k(),e()},300)):ke(p)},async ensureUserDoc(e){if(!e||!e.uid)return;if(E){let a=JSON.parse(localStorage.getItem("f1_db")||"{}");a.users||(a.users={}),a.users[e.uid]||(a.users[e.uid]={displayName:e.displayName||"F1 Fan",email:e.email,favoriteTeam:"None",createdAt:new Date().toISOString(),preferences:{reducedMotion:!1}},localStorage.setItem("f1_db",JSON.stringify(a)));return}const t=K(C,"users",e.uid);try{(await X(t)).exists()||(await Y(t,{displayName:e.displayName||"F1 Fan",email:e.email,favoriteTeam:"None",createdAt:new Date().toISOString(),preferences:{reducedMotion:!1}},{merge:!0}),console.log("[AuthService] Initialized new Firestore user document."))}catch(a){console.error("[AuthService] Failed to create Firestore user document.",a)}}},Ke=Object.freeze(Object.defineProperty({__proto__:null,authService:w},Symbol.toStringTag,{value:"Module"})),U={"Red Bull Racing":"#1E5BC6","McLaren F1 Team":"#FF8000","Scuderia Ferrari":"#DC0000","Mercedes-AMG F1":"#00D2BE","Aston Martin Aramco":"#006F62","Williams Racing":"#005AFF","BWT Alpine F1 Team":"#0090FF","MoneyGram Haas F1 Team":"#FFFFFF","Stake F1 Team Kick Sauber":"#2BFF00","Visa Cash App RB":"#1E41FF","Andretti Cadillac":"#C5A04F",None:"var(--f1-red)"};let y=null;function z(e){if(!e||e==="None"){document.documentElement.style.removeProperty("--team-accent"),document.documentElement.style.removeProperty("--team-accent-glow");return}const t=U[e]||"var(--f1-red)";document.documentElement.style.setProperty("--team-accent",t),document.documentElement.style.setProperty("--team-accent-glow",`${t}40`)}async function M(e){if(!e)return y=null,z(null),null;try{const t=I("users",e.uid),a=await Q(t);return a.exists()?y=a.data().favoriteTeam||"None":y="None",y==="None"?Z():z(y),y}catch(t){console.error("Error fetching personalization state",t)}return null}const F=document.getElementById("team-modal"),V=document.getElementById("team-close"),B=document.getElementById("team-selector-grid");function Z(){F&&(F.classList.remove("hidden"),$e())}function ee(){F&&F.classList.add("hidden")}V&&V.addEventListener("click",ee);function $e(){if(!B)return;const e=Object.keys(U).filter(t=>t!=="None");B.innerHTML=e.map(t=>{const a=U[t];return`
        <button class="team-select-btn" data-team="${t}">
          <div class="team-color-indicator" style="background: ${a}; width: 16px; height: 16px; border-radius: 50%; margin-right: 12px; display: inline-block;"></div>
          <span class="team-name" style="color: white; font-weight: 500;">${t}</span>
        </button>
      `}).join(""),B.querySelectorAll(".team-select-btn").forEach(t=>{t.addEventListener("click",async a=>{const r=a.currentTarget.dataset.team;if(p.currentUser)try{const o=I("users",p.currentUser.uid);await R(o,{favoriteTeam:r},{merge:!0}),y=r,z(r),window.dispatchEvent(new CustomEvent("f1TeamChanged",{detail:{team:r}}))}catch(o){console.error("Error setting team.",o)}ee()})})}document.addEventListener("DOMContentLoaded",()=>{w.initAuthListener(async e=>{const t=document.getElementById("nav-auth-container");if(t)if(e){const a=e.displayName||"Fan",r=(e.displayName||e.email||"U")[0].toUpperCase();t.innerHTML=`
              <div class="user-profile">
                <span class="nav-user-name">${a}</span>
                <div class="user-avatar">${r}</div>
                <div class="user-dropdown">
                  <div class="user-info">
                    <span class="user-name">${a}</span>
                    <span class="user-email">${e.email}</span>
                  </div>
                  <a href="#" class="dropdown-item" id="btn-settings">Favorite Team</a>
                  <a href="#" class="dropdown-item" id="btn-logout">Sign Out</a>
                </div>
              </div>
            `,document.getElementById("btn-logout").addEventListener("click",o=>{o.preventDefault(),M(null),w.logout()}),document.getElementById("btn-settings").addEventListener("click",o=>{o.preventDefault(),Z()}),await M(e)}else t.innerHTML='<button class="btn-primary btn-sm" id="btn-login-modal">Login / Sign Up</button>',document.getElementById("btn-login-modal").addEventListener("click",ae),M(null)})});let x=0,v=[];const j=()=>{const e=document.getElementById("nav-notifications-container");if(!e)return;const t=`
        <div class="bell-icon">üîî
          ${x>0?`<div class="bell-badge">${x}</div>`:""}
        </div>
        <div class="notification-dropdown">
          <div class="notif-header">
            <h4>Alerts</h4>
            ${x>0?'<a href="#" id="mark-all-read">Mark all as read</a>':""}
          </div>
          <div class="notif-list">
            ${v.length===0?'<div class="notif-empty">No new notifications</div>':v.map(r=>`
                  <div class="notif-item ${r.read?"":"unread"}" data-id="${r.id}">
                    <div class="notif-icon">${r.type==="race"?"üèÅ":r.type==="breaking"?"‚ö†Ô∏è":"üìä"}</div>
                    <div class="notif-content">
                      <p>${r.message}</p>
                      <span class="notif-time">${new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</span>
                    </div>
                  </div>
                `).join("")}
          </div>
        </div>
      `;e.innerHTML=t;const a=document.getElementById("mark-all-read");a&&a.addEventListener("click",async r=>{if(r.preventDefault(),r.stopPropagation(),v.forEach(o=>o.read=!0),x=0,p.currentUser)try{await R(I(C,"notifications",p.currentUser.uid),{items:v})}catch{}j()})},te=e=>{e?Q(I(C,"notifications",e.uid)).then(t=>{t.exists()&&t.data().items?v=t.data().items:(v=[{id:3,type:"personal",message:`Welcome ${e.displayName||""} to F1 Insight! Don't forget to set your favorite team.`,read:!1,timestamp:Date.now()}],R(I(C,"notifications",e.uid),{items:v}).catch(()=>{})),x=v.filter(a=>!a.read).length,j()}).catch(t=>{console.warn("Notifications offline due to keys config.")}):(v=[{id:1,type:"breaking",message:"Verstappen announces shock 2027 move to Mercedes.",read:!1,timestamp:new Date().getTime()-1e6},{id:2,type:"race",message:"Australian GP Free Practice 1 begins in 2 hours.",read:!1,timestamp:new Date().getTime()-36e5}],x=v.filter(t=>!t.read).length,j())};te(null);w.initAuthListener(e=>{te(e)});function ae(){window.dispatchEvent(new CustomEvent("open-auth-modal"))}document.body.addEventListener("click",e=>{e.target.closest("#btn-login-modal")&&ae(),e.target.closest("#team-close")&&closeTeamModal()});const Ue="modulepreload",ze=function(e){return"/"+e},q={},je=function(t,a,r){let o=Promise.resolve();if(a&&a.length>0){let m=function(c){return Promise.all(c.map(b=>Promise.resolve(b).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=s?.nonce||s?.getAttribute("nonce");o=m(a.map(c=>{if(c=ze(c),c in q)return;q[c]=!0;const b=c.endsWith(".css"),f=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const g=document.createElement("link");if(g.rel=b?"stylesheet":Ue,b||(g.as="script"),g.crossOrigin="",g.href=c,i&&g.setAttribute("nonce",i),document.head.appendChild(g),b)return new Promise((L,D)=>{g.addEventListener("load",L),g.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return o.then(s=>{for(const i of s||[])i.status==="rejected"&&l(i.reason);return t().catch(l)})};function H({id:e,drivers:t,initialValue:a,onChange:r}){const[o,l]=h.useState(a);h.useRef(null);const s=i=>{l(i);const m=document.getElementById(e);if(m){m.value=i;const c=new Event("change",{bubbles:!0});m.dispatchEvent(c)}r&&r(i)};return h.useEffect(()=>{const i=document.getElementById(e);if(!i)return;const m=setInterval(()=>{i.value&&i.value!==o&&l(i.value)},100);return()=>clearInterval(m)},[e,o]),n.createElement("div",{className:"islands-root"},n.createElement(oe,{value:o,onValueChange:s},n.createElement(ie,{className:"inline-flex items-center justify-between rounded-md px-[15px] text-[13px] leading-none h-[35px] gap-[5px] bg-[var(--surface-bg)] text-white shadow-[0_2px_10px] shadow-black/10 hover:bg-white/5 focus:shadow-[0_0_0_2px] focus:shadow-black data-[placeholder]:text-white/50 outline-none border border-white/10 min-w-[200px]","aria-label":"Driver"},n.createElement(se,{placeholder:"Select a driver"}),n.createElement(le,{className:"text-white/50"},n.createElement(O,{size:16}))),n.createElement(ce,null,n.createElement(de,{className:"overflow-hidden bg-[rgba(15,17,21,0.95)] backdrop-blur-md rounded-md border border-white/10 shadow-[0px_10px_38px_-10px_rgba(22,23,24,0.35),0px_10px_20px_-15px_rgba(22,23,24,0.2)] z-[100]"},n.createElement(ue,{className:"flex items-center justify-center h-[25px] bg-[var(--surface-bg)] text-white cursor-default"},n.createElement(O,{size:16,className:"rotate-180"})),n.createElement(me,{className:"p-[5px]"},t.map(i=>n.createElement(fe,{key:i.code,value:i.code.toLowerCase(),className:"text-[13px] leading-none text-white/80 rounded-[3px] flex items-center h-[25px] pr-[35px] pl-[25px] relative select-none data-[disabled]:text-white/30 data-[disabled]:pointer-events-none data-[highlighted]:outline-none data-[highlighted]:bg-white/10 data-[highlighted]:text-white"},n.createElement(pe,null,i.name," (",i.team,")"),n.createElement(ge,{className:"absolute left-0 w-[25px] inline-flex items-center justify-center"},n.createElement(ne,{size:14,className:"text-[var(--f1-red)]"}))))),n.createElement(he,{className:"flex items-center justify-center h-[25px] bg-[var(--surface-bg)] text-white cursor-default"},n.createElement(O,{size:16}))))))}function Ge(){const[e,t]=h.useState(!1),[a,r]=h.useState(!1),[o,l]=h.useState(""),[s,i]=h.useState(""),[m,c]=h.useState(!1),[b,f]=h.useState("");h.useEffect(()=>{const d=()=>t(!0);return window.addEventListener("open-auth-modal",d),()=>window.removeEventListener("open-auth-modal",d)},[]);const g=async d=>{d.preventDefault(),c(!0),f("");try{if(a){const T=await w.signup(o,s);await w.ensureUserDoc(T.user)}else await w.login(o,s);t(!1)}catch(T){f(T.message)}finally{c(!1)}},L=async()=>{if(window.location.hostname==="127.0.0.1"){window.location.hostname="localhost";return}c(!0),f("");try{const d=await w.loginWithGoogle();await w.ensureUserDoc(d.user),t(!1)}catch(d){f(d.message)}finally{c(!1)}},D=d=>{d.preventDefault(),r(!a),f("")};return n.createElement(ve,{open:e,onOpenChange:t},n.createElement(Oe,null,e&&n.createElement(be,{forceMount:!0},n.createElement(we,{asChild:!0},n.createElement(W.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50"})),n.createElement(ye,{asChild:!0},n.createElement(W.div,{initial:{opacity:0,scale:.95,x:"-50%",y:"-48%"},animate:{opacity:1,scale:1,x:"-50%",y:"-50%"},exit:{opacity:0,scale:.95,x:"-50%",y:"-48%"},transition:{type:"spring",stiffness:300,damping:25},className:"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg gap-4 border border-white/10 bg-[rgba(15,17,21,0.85)] backdrop-blur-md p-6 shadow-lg sm:rounded-[var(--radius-sm)] radix-content text-white"},n.createElement("div",{className:"flex flex-col space-y-1.5 text-center sm:text-left mb-4 border-b border-white/10 pb-4"},n.createElement(Ee,{className:"font-orbitron text-xl font-bold uppercase tracking-wider m-0"},a?"Create Account":"Driver Access"),n.createElement(xe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-white/10 data-[state=open]:text-white"},n.createElement(re,{className:"h-5 w-5"}),n.createElement("span",{className:"sr-only"},"Close"))),n.createElement("div",{className:"flex flex-col gap-4"},b&&n.createElement("div",{className:"bg-[var(--f1-red)]/20 border border-[var(--f1-red)]/50 text-white p-3 rounded text-sm text-center font-bold font-inter tracking-wide shadow-[0_0_15px_rgba(225,6,0,0.3)]"},b),n.createElement("form",{onSubmit:g,className:"flex flex-col gap-4"},n.createElement("div",{className:"flex flex-col gap-1"},n.createElement("label",{className:"text-xs uppercase tracking-wider text-white/50 font-bold mb-1"},"Email"),n.createElement("input",{type:"email",value:o,onChange:d=>l(d.target.value),required:!0,placeholder:"name@f1insight.com",className:"bg-white/5 border border-white/10 rounded px-3 py-2 text-white placeholder:text-white/20 focus:outline-none focus:border-white/30 focus:bg-white/10 transition-colors"})),n.createElement("div",{className:"flex flex-col gap-1"},n.createElement("label",{className:"text-xs uppercase tracking-wider text-white/50 font-bold mb-1"},"Password"),n.createElement("input",{type:"password",value:s,onChange:d=>i(d.target.value),required:!0,placeholder:"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",className:"bg-white/5 border border-white/10 rounded px-3 py-2 text-white placeholder:text-white/20 focus:outline-none focus:border-white/30 focus:bg-white/10 transition-colors"})),n.createElement("div",{className:"mt-2"},n.createElement("button",{type:"submit",disabled:m,className:"w-full bg-[var(--f1-red)] hover:bg-[#ff1a1a] text-white font-orbitron font-bold uppercase tracking-wider py-3 rounded text-sm transition-all shadow-[0_4px_15px_rgba(225,6,0,0.4)] disabled:opacity-50 disabled:cursor-not-allowed"},m?"Processing...":a?"Sign Up":"Sign In"))),n.createElement("div",{className:"relative my-2"},n.createElement("div",{className:"absolute inset-0 flex items-center"},n.createElement("div",{className:"w-full border-t border-white/10"})),n.createElement("div",{className:"relative flex justify-center text-xs uppercase"},n.createElement("span",{className:"bg-[rgba(20,22,28,1)] px-2 text-white/50 font-bold tracking-wider"},"Or"))),n.createElement("button",{onClick:L,disabled:m,type:"button",className:"w-full bg-white text-black hover:bg-gray-100 font-inter font-bold py-2 rounded text-sm transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},n.createElement("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"w-5 h-5"}),"Sign In with Google")),n.createElement("div",{className:"text-center mt-4 text-sm text-white/60"},n.createElement("p",null,a?"Already have an account? ":"Don't have an account? ",n.createElement("a",{href:"#",onClick:D,className:"text-white hover:text-[var(--f1-red)] hover:underline font-bold transition-colors"},a?"Sign In":"Sign Up"))))))))}document.addEventListener("DOMContentLoaded",()=>{const e=window.F1Data?window.F1Data.drivers:[],t=document.getElementById("radix-driver-a");t&&e.length>0&&A.createRoot(t).render(n.createElement(H,{id:"driver-a-select",drivers:e,initialValue:"ver"}));const a=document.getElementById("radix-driver-b");a&&e.length>0&&A.createRoot(a).render(n.createElement(H,{id:"driver-b-select",drivers:e,initialValue:"nor"}));let r=document.getElementById("auth-react-root");r||(r=document.createElement("div"),r.id="auth-react-root",document.body.appendChild(r)),A.createRoot(r).render(n.createElement(Ge,null));const l=document.getElementById("full-standings-react-root");l&&je(async()=>{const{DriverStandingsTable:s}=await import("./DriverStandingsTable-BIDBRA_M.js");return{DriverStandingsTable:s}},__vite__mapDeps([0,1,2,3,4,5])).then(({DriverStandingsTable:s})=>{A.createRoot(l).render(n.createElement(s,null))})});export{je as _,I as a,Ke as b,R as f};
